<!--
# $LAN=Python$
# Author : 李明儒 Ming-Ru Li
# Student ID : M133040055
# Date : 2024/12/4
-->
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./Picture/TitleIcon.png">
    <title>Voronoi_Diagram</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="header-container">
            <h1>Voronoi diagram</h1>
            <nav>
                <ul class="inline-nav">
                    <li><a href="#Introduction">簡介</a></li>
                    <li><a href="#specification">軟體規格書</a></li>
                    <li><a href="#instructions">軟體說明</a></li>
                    <li><a href="#programDesign">程式設計</a></li>
                    <li><a href="#testAndResult">軟體測試與實驗結果</a></li>
                    <li><a href="#conclusion">結論與心得</a></li>
                    <li><a href="#appendix">附錄</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main>
        <section id="ProgramInfo">
            <h1>軟體資訊</h1>
                <p>1. 題目：Voronoi Diagram</p>
                <p>2. 作者：李明儒</p>
                <p>3. 系級：中山資工所碩一</p>
                <p>4. 學號：M133040055</p>
                <p>5. 程式語言: Python</p>
        </section>

        <section id="introduction">
            <h1>Voronoi Diagram 簡介</h1>
            <p>
                Voronoi 圖是數學中一個用來劃分空間的結構。它由一組點（稱為種子點或生成點）組成，並將空間劃分成不同的區域，每個區域由離其對應的種子點最近的所有位置所構成。這些區域稱為 Voronoi 區域。簡單來說，每個 Voronoi 區域是由該區域內所有點與某一個種子點的距離較近的點所形成的區域。
            </p>
            <p>
                Voronoi 圖在許多領域中都有廣泛的應用，包括地理資訊系統、機器學習、物理學、計算幾何等。它是一個非常強大且具有多種用途的數學工具，能夠有效地處理與空間劃分、聚類和最近鄰問題相關的問題。
            </p>
            <h3>Voronoi 圖的典型應用</h3>
            <ul>
                <li><strong>地理資訊系統 (GIS)</strong>: 分析城市設施的影響範圍，規劃設施分布和交通。</li>
                <li><strong>機器學習</strong>: 助於聚類分析，作為 K-均值聚類的基礎模型。</li>
                <li><strong>天文學</strong>: 描述星系或其他天體的分佈，分析天體關係。</li>
                <li><strong>物理學</strong>: 描述顆粒結構或晶體結構的幾何特性。</li>
                <li><strong>生物學</strong>: 分析細胞分佈，模擬生物體內細胞間距。</li>
                <li><strong>機械工程</strong>: 用於材料分佈、應力分析和結構設計優化。</li>
            </ul>
            <p>
                Voronoi 圖的應用範圍仍在不斷拓展，許多學科正探索其潛在用途並實現創新解決方案。
            </p>
        </section>

        <section id="specification">
            <h1>軟體規格書</h1>
            <h3 style="color:#0078D7">
                [輸出與輸入資料規格]
            </h3>
            <ul>
                <li>輸入規格：使用滑鼠在畫布上點擊並按添加點按鈕來輸入點資料、隨機生成，或者按下讀取輸入檔來輸入點資料</li>
                <li>輸出規格：按下「執行」或「步驟執行」皆可將結果呈現在畫布上，按下「輸出」可將結果輸出成文字檔</li>
            </ul>

            <h3 style="color:#0078D7">
                [程式功能規格與介面規格]
            </h3>
            <p>(一) 介面規格</p>
            <img src="./Picture/canvas.png" alt="介面規格圖" class="same-width"> 
            <p>1. 軟體名稱：Voronoi Diagram</p>
            <p>2. 畫面：600 x 600</p>
            <p>3. 添加點：滑鼠位置、(x, y)輸入、點數量</p>
            <p>4. 執行：執行、下一組資料、一步一步執行、清空畫面</p>
            <p>5. 檔案：讀取輸入檔、讀取輸出檔、輸出文字檔</p>
            <p>6. 點資料：點數、點座標</p>
            <p>7. 邊資料：邊數、邊座標</p>
            <p>8. 狀態列</p><br>

            <p>(二) 功能規格</p>
            <p>添加點→滑鼠位置：顯示滑鼠在畫面中的座標位置</p>
            <p>添加點→(x, y)輸入：指定(x, y)座標的方式添加點</p>
            <p>添加點→點數量：指定點數的方式隨機添加點</p>
            <p>執行→執行：一次執行完畢</p>
            <p>執行→下一組資料：如果使用『讀取輸入檔』功能，顯示輸入檔中下一組點資料</p>
            <p>執行→一步一步執行：一步一步執行，主要分成八步驟(1)畫left convex hull、(2)畫left Voronoi、(3)畫right convex hull、(4)畫right Voronoi、(5)畫merged convex hull、(6)畫hyperplane、(7)消線、(8)完成</p>
            <p>執行→清空畫面：清除畫面上的邊和點</p>
            <p>檔案→讀取輸入檔：使用輸入檔 (.txt)的方式添加點</p>
            <p>檔案→讀取輸出檔：使用輸出檔 (.txt)的方式添加點或邊</p>
            <p>檔案→輸出文字檔：將Voronoi Diagram存成txt文字檔</p><br>
        
            <p>(三) 測試規劃</p>
            <p>1. 1點：不做任何動作</p>
            <p>2. 2點：找出2點中垂線</p>
            <p>3. 3點：找出3點外心，並以外心為起點，往外畫出三條中垂線</p>
            <p>4. 4~6點：分割 (divide)與合併 (merge)一次</p>
            <p>5. 7點以上：Divide and Conquer</p>
        </section>

        <section id="instructions">
            <h1>軟體說明</h1>
        
            <h3>[主意要點]</h3>
            <ul>
                <li><strong>Windows：</strong> Vorono_Diagram檔案為Windows打包的可執行檔，直接運行</li>
                <li><strong>MacOS：</strong> Vorono_Diagram檔案未提供編譯版本，但可以透過程式碼及Python打包工具自行打包</li>
            </ul><br>

            <h3>[Python]</h3>
            <ul>
                <li><strong>開發版本：</strong> Python 3.12.7 </li>
                <li><strong>依賴包：</strong> 在 requirement.txt中</li>
                <li><strong>環境部署：</strong> python虛擬環境</li>
            </ul><br>

            <h3>[Python 虛擬環境部署]</h3>
            <ul>
                <li><strong>建立虛擬python :</strong> python3 -m venv myEnv</li>
                <li><strong>啟用虛擬python :</strong> source myenv/bin/activate</li>
                <li><strong>執行python檔案 :</strong> python3 [檔案名稱.py]</li>
                <li><strong>關閉虛擬python :</strong> deactivate</li>
            </ul>
        </section>

        <section id="programDesign">
            <h1>程式設計</h1>
            
            <h3>資料結構</h3>
            <ul>
                <li><strong>Voronoi Class :</strong> 記錄目前正在計算的圖的所有點跟邊</li>
                <li><strong>Edge :</strong> 紀錄線的兩個端點 (x1, y1), (x2, y2) 以及線的兩個 parents p1, p2</li>
            </ul>
            <img src="./Picture/class.png" alt="介面規格圖" class="same-width"> 
            <br>
        
            <h3>線的交點</h3>
            <p>透過使用向量 By: <code>FindIntersection</code> function 來求兩線的交點</p>
            <br>
        
            <h3>ConvexHull</h3>
            <p>對兩邊做畫 <code>ConvexHull</code>，使用Jarvis March演算法來算出convex hull</p>
            <p>By: <code>ConvexHull()</code> <code>drawHull()</code> function</p>
            <br>
        
            <h3>找上下公切線</h3>
            <p>利用目前做到divide 那層的diagram中的convex Hull來判斷，並且我們有left_sub_diagram , right_sub_diagram 的 points ,
            那因為找convex hull 時會對convex Hull的那些點進行順時針的排序，所以可以透過判斷從右子圖到左子圖為上公切線，從左子圖到右子圖為下公切線
            </p>
            <p>By: <code>ConvexHull()</code> , <code>FindCommonTangent()</code>function</p>
            <br>
        
            <h3>Merge</h3>
            <p>必須先求出左右兩邊的 VD 上下公切線，透過此公切點來辨別從哪邊開始與在哪邊結束，這邊就是開始做hyperPlane的做圖，那步驟是：</p>
            <ul>
                <li>(1)先將上公切線的兩個點取出,令(upper1 , upper2) , 並且做bisector(中垂線)</li>
                <li>(2)開始做 hyperPlane的做圖，從(upper1,upper2)的bisector開始做，看交到哪條最近的並且方向向下邊</li>
                <li>(3)這條邊的其中一個的parents一定是upper1 or upper2其一，假設是upper1就將現有upper1變成交到邊的另一個parent，upper2同理</li>
                <li>(2)持續做直到upper1跟upper2等同於下公切線的兩個點(lower1,lower2)，那此時畫完最后一條中垂線hyperPlane就算完成</li>
            </ul>
            <p>By: <code>Merge()</code> , <code>HyperPlane()</code>function</p>
            <p><em>※ 在過程中，交線要保留哪邊的線段可以透過外積的技巧來判斷 ※</em></p>
            <br>
        
            <h3>消除多餘的線</h3>
            <p>透過求得的hyperPlane(邊集合)往外擴，那如果沒有連到的邊，即跟hyperPlane不為connected的邊就是多餘的線，必須將其刪除</p>
            <br>
        
            <h3>步驟執行</h3>
            <p>寫一個 lock，在主程式需要暫時停止的程式功能部分裡加上 do-nothing 的 while 迴圈，透過一個 Boolean Flag 判斷是否跳出迴圈，藉以達成步驟執行的概念。</p>
            <p>在[執行]跟[一步一步執行]中加入lock判斷跟操作</p>
            <br>
        
            <h3>控制項功能</h3>
            <p>彼此之間經過設計，不會在某功能執行間按下其他功能導致計算結果錯誤的現象</p>
            <br>
        </section>

        <section id="testAndResult">
            <h1>軟體設計與實驗結果</h1>
            
            <h3>測試環境</h3>
            <ul>
                <li>作業系統：MacOS、Windows</li>
                <li>記憶體：8GB RAM</li>
            </ul>
            <br>
        
            <h3>實驗案例</h3>
            <div class="experiment-images">
                <figure>
                    <img src="./Picture/subgraph.png" alt="10點" class="responsive-img">
                    <figcaption>分成左右子圖</figcaption>
                </figure>
                <figure>
                    <img src="./Picture/hyperPlane.png" alt="10點" class="responsive-img">
                    <figcaption>畫hyperPlane</figcaption>
                </figure>
                <figure>
                    <img src="./Picture/final_result.png" alt="10點" class="responsive-img">
                    <figcaption>最終結果</figcaption>
                </figure>
                <figure>
                    <img src="./Picture/10points.png" alt="10點" class="responsive-img">
                    <figcaption>10 點測試結果</figcaption>
                </figure>
                <figure>
                    <img src="./Picture/30points.png" alt="30點" class="responsive-img">
                    <figcaption>30 點測試結果</figcaption>
                </figure>
                <figure>
                    <img src="./Picture/50points.png" alt="50點" class="responsive-img">
                    <figcaption>50 點測試結果</figcaption>
                </figure>
            </div>
            <br>
        
            <h3>實驗結果</h3>
            <ul>
                <li>系統可正確顯示至 100 點 Voronoi 圖。</li>
                <li>若出現畫線錯誤或無窮迴圈，可能是保留或交線演算法未考慮周詳，需進一步改進。</li>
            </ul>
            <br>
        </section>

        <section id="conclusion">
            <h1>結論與心得</h1>
        
            <h3>結論</h3>
            <ul>
                <li>畫面設計：使用 Python 的 tkinter，學習了 `grid` 和 `pack` 等版面配置方法。</li>
                <li>小數據處理：三點以下的問題，透過數學方法如外基、中垂線和外心，計算出正確結果。</li>
                <li>大數據處理：四點以上透過 Voronoi Diagram 的 Divide and Conquer 演算法，整合多種數學原理，包括：
                    <ul>
                        <li>ConvexHull 算法求上下切線</li>
                        <li>HyperPlane 方向設計與結構調整</li>
                        <li>外積判斷順時針與逆時針並完成刪邊</li>
                    </ul>
                </li>
            </ul>
            <br>
        
            <h3>心得</h3>
            <p>
                從一開始構思實作方法，到設計資料結構和演算法，過程中與實驗室同學互相討論，逐步完善專案架構。即使如此，在實作過程中仍遇到各種挑戰，包括：
            </p>
            <ul>
                <li>特殊案例導致的 Bug 修復，例如長度設計和近似共線的誤判。</li>
                <li>程式碼調整後，需重新設計資料結構的功能以兼容新需求。</li>
                <li>Debug 階段花費大量時間，特別是在邊界端點設計、求交點、刪邊及 HyperPlane 精度處理時。</li>
            </ul>
            <p>
                此專案不僅加深了我對 Python tkinter 的畫面設計理解，更讓我在與同學的討論中，透過不同視角發現盲點，共享 Bug 解決方案以提高效率。整體過程既充滿挑戰，也收穫滿滿，完成了更具穩定性與功能性的 Voronoi Diagram Project。
            </p>
        </section>
        
        <section id="appendix">
            <h1>附錄</h1>
            <ul>
                <li>
                    <a href="https://github.com/Lee29good/Voronoi-diagram" target="_blank">程式可執行檔</a>
                </li>
                <li>
                    <a href="https://github.com/Lee29good/Voronoi-diagram/blob/main/Voronoi.py" target="_blank">Voronoi_Diagram Python 程式碼</a>
                </li>
                <li>
                    <a href="https://github.com/Lee29good/Voronoi-diagram/blob/main/沒註解測資.txt" target="_blank">相關測資</a>
                </li>
                <li>
                    <a href="https://tsungsquare.blogspot.com/2022/01/VoronoiDiagram1.html#google_vignette" target="_blank">參考文章</a>
                </li>
            </ul>
        </section>

    </main>
    <footer>
        <div class="contact-info"> 
            <div class="icons"> 
                <img src="./Picture/gmail.png" alt="Email Icon"> 
                <img src="./Picture/phone.png" alt="Phone Icon">
                <img src="./Picture/address.png" alt="Address Icon"> 
                <img src="./Picture/skype.png" alt="skype Icon"> 
                <img src="./Picture/ig.png" alt="IG Icon"> 
            </div> 
        <div class="details"> 
            <p style="margin-right: 10px; display: inline-block;">Address: National Sun Yat-sen University computer science</p> 
            <p style=" display: inline-block; margin-right: 10px;">Email: Lee910404@google.com</p> 
            <p  style=" display: inline-block;">Phone: +666 666 6666</p> 
        </div> 
        <div class="copyright">
                &copy; 2024 國立中山大學 資工碩. All rights reserved. 
        </div>
    </footer>
</body>
</html>
